<!DOCTYPE html>
<html lang="en-US">

<head>

<title>MenuDrop</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  html {
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  body {
    margin: 0;
    padding: 0 24px;
    width: 100%;
    height: 100%;
    color: #ffffff;
    font-family: sans-serif;
    background: url("https://wallpaperaccess.com/full/170249.jpg") no-repeat center;
    background-size: cover;
    overflow: auto;
  }
</style>

<template id="menu_styles">

<style>
:host, *, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
:host {
  position: relative;/*position: fixed;right: 0;top: 0;*/
  display: inline-block;
  color: #000000;
  font-size: 13px;
  font-family: system-ui, sans-serif;
  white-space: pre;
  user-select: none;
  -webkit-user-select: none;
  -webkit-app-region: no-drag;
  -webkit-text-size-adjust: 100%;
}
</style>

</template>

</head>

<body>

<h1>MenuDrop</h1>

<nav>

<menu-drop>
{
  "type": "opener",
  "name": "JSON-based menu"
},
{
  "type": "list",
  "content": [
    {
      "type": "list",
      "name": "A nice submenu",
      "content": [
        {
          "type": "list-item",
          "name": "JSON is cool",
          "shortcuts": {
            "default": "Ctrl + Shift + 1"
          }
        },
        {
          "type": "list-item",
          "name": "woah fancy"
        }
      ]
    },
    {
      "type": "list-item",
      "name": "noice list"
    },
    {
      "type": "list-item",
      "name": "Option 2",
      "shortcuts": {
        "default": "Ctrl + Shift + 2"
      }
    },
    {
      "type": "divider"
    },
    {
      "type": "list",
      "name": "dropdowndropdown",
      "content": [
        {
          "type": "list",
          "name": "dropdowndropdown",
          "content": [
            {
              "type": "list-item",
              "name": "goes on for a long time"
            },
            {
              "type": "list",
              "name": "dropdowndropdown",
              "content": [
                {
                  "type": "list-item",
                  "name": "goes on for a long time"
                },
                {
                  "type": "list",
                  "name": "dropdowndropdown",
                  "content": [
                    {
                      "type": "list-item",
                      "name": "goes on for a long time"
                    },
                    {
                      "type": "list",
                      "name": "dropdowndropdown",
                      "content": [
                        {
                          "type": "list-item",
                          "name": "goes on for a long time"
                        },
                        {
                          "type": "list",
                          "name": "dropdowndropdown",
                          "content": [
                            {
                              "type": "list-item",
                              "name": "goes on for a long time"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "list-item",
          "name": "gibberish words"
        },
        {
          "type": "list-item",
          "name": "content to help test things"
        }
      ]
    },
    {
      "type": "list-item",
      "name": "Really long name for testing"
    },
    {
      "type": "list-item",
      "name": "Better responsiveness!"
    }
  ]
}
</menu-drop>

</nav>

<script>console.clear();
class MenuDropElement extends HTMLElement {
  constructor(){
    super();
    this.attachShadow({ mode: "open" });
  }
  connectedCallback(){
    var layout = JSON.parse(`[${this.textContent}]`);
    console.log(layout);

    this.container = document.createElement("div");
    this.container.part = "container";

    this.opener = document.createElement("button");
    this.opener.part = "opener";
    this.opener.textContent = layout.find(element => element.type == "opener").name || "";


    this.createList({ content: layout });

    this.shadowRoot.appendChild(this.container);
    this.container.appendChild(this.opener);
  }
  createList({ parent = this.container, content } = {}){
    content.forEach(element => {
      
    });
  }
}
window.customElements.define("menu-drop",MenuDropElement);
</script>

</body>

</html>